<!DOCTYPE html><html lang="pl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Array - Struktury danych - Grezisek</title><meta name="description" content="Nieprzerwana, surowa seria danych o stałej długości."><style>@font-face{font-family:Aleo;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/aleo/v14/c4mv1nF8G8_swAPJ0Q1o.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Aleo;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/aleo/v14/c4mv1nF8G8_swA3J0Q.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Comme;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/comme/v2/8QIHdirKhMbn-su3uI0crg.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Comme;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/comme/v2/8QIHdirKhMbn-su5uI0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Comme;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/comme/v2/8QIHdirKhMbn-su3uI0crg.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Comme;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/comme/v2/8QIHdirKhMbn-su5uI0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><link rel="stylesheet" href="/m.css"><script src="/app.js"></script></head><body class="sw"><a href="#content">Przeskocz do treści</a><div id="sp"><button id="so">Ustawienia</button><dialog id="sd"><div><h2>Ustawienia</h2><button id="sc">Zamknij</button><form id="sf"><fieldset class="g g1"><legend>Motyw:</legend><label><input type="radio" name="theme" value="">Automatyczny (urządzenie)</label><label><input type="radio" name="theme" value="dark">Ciemny</label><label><input type="radio" name="theme" value="light">Jasny</label></fieldset><fieldset class="g g1"><legend>Kontrast:</legend><label><input type="radio" name="contrast" value="">Automatyczny (urządzenie)</label><label><input type="radio" name="contrast" value="less">Normalny</label><label><input type="radio" name="contrast" value="more">Zwiększony</label></fieldset><fieldset class="g g1"><legend>Grubość obramówek:</legend><label><input type="radio" name="border_width" value="">Normalne</label><label><input type="radio" name="border_width" value="0">Cienkie</label><label><input type="radio" name="border_width" value="2">Grube</label></fieldset><fieldset class="g g1"><legend>Zapamiętywanie ustawień:</legend><label><input type="radio" name="data" value="">Brak</label><label><input type="radio" name="data" value="local_storage">Trwały zapis w przeglądarce (localStorage)</label><label><input type="radio" name="data" value="session_storage">Tymczasowy zapis w przeglądarce (sessionStorage)</label></fieldset><fieldset class="g g1"><legend>Zapisane ustawienia:</legend><code id="sout" class="m"></code><button id="sdel">Usuń zapisane ustawienia</button></fieldset></form></div></dialog></div><script>CSSVars();SettingsApply();</script><header id="h"><a class="l" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="33" height="41" viewBox="0 0 408 512"><g transform="translate(-368 -584)"><rect width="80" height="80" transform="translate(696 1016)" fill="var(--cc)" /><path d="M368,1096V584H776V800H696V656H448v360H552v80Z" fill="var(--cc)" /><path d="M552,1096V880H776v80H632v136Z" fill="var(--c)" /></g></svg>grezisek</a><a href="/artykuly/" class="aa">artykuły</a><a href="/projekty/">projekty</a><a href="mailto:grezisek@gmail.com">e-mail</a></header><article id="content" class="rw2"><header><h1>Array - Struktury danych</h1><p>Nieprzerwana, surowa seria danych o stałej długości.</p></header><section><h2>Sposób działania</h2><p>Array jest najprostszą strukturą danych.
            Jej wielkość jest znana przed utworzeniem i stała po utworzeniu.
            Pamięć jest nieprzerwana, czyli wszystko pomiędzy początkiem a końcem pamięci array jest jej elementem.
            Mówiąc inaczej - nie istnieje sytuacja nieistniejących lub cudzych danych w środku.</p><p>Podstawowa wersja zawiera jedynie operacje odczytu i zapisu według indeksu.
            Strukturę można rozbudować o dane z zapamiętaną długością.
            Operacje typu push, pop, shift itp. są niemożliwe w tej strukturze danych - jej długość jest stała.</p></section><section><h2>Implementacja</h2><p>Zaczynam od modułu posiadającego pamięć tworzoną w javascript.
            Długość array w tym przykładzie wynosi jedną stronę pamięci WebAssembly, czyli 16384 liczb i32.
            Przykład można rozwinąć o konfigurację długości i test sprawdzający, czy indeks mieści się w zakresie.</p><pre><code>(module
    (memory (import "js" "memory") 1)
)</code></pre><p>Array posiada tylko metodę odczytu (get) i zapisu (set) danych.
            Metoda get przyjmuje indeks liczby i zwraca wartość, natomiast set przyjmuje indeks i wartośc ale nie zwraca rezultatu.</p><pre><code>(module
    (memory (import "js" "memory") 1)
    (func (export "get") (param $i i32) (result i32))
    (func (export "set") (param $i i32) (param $v i32))
)</code></pre><p>Aby pobrać wartość z array, należy obliczyć adres pamięci a potem wczytać wartość z tego adresu.
            Aby zapisać wartość do array, należy obliczyć adres pamięci a potem zapisać wartość pod tym adresem.
            Pamiętając, że i32 zajmuje cztery bajty, obliczam adres mnożąc indeks przez 4.</p><pre><code>(module
    (memory (import "js" "memory") 1)
    (func (export "get") (param $i i32) (result i32)
        local.get $i i32.const 4 i32.mul
        i32.load
    )
    (func (export "set") (param $i i32) (param $v i32)
        local.get $i i32.const 4 i32.mul local.get $v
        i32.store
    )
)</code></pre></section><section><h2>Połączenie z javascript i użycie.</h2><p>Po skompilowaniu kodu do wersji binarnej, należy go jeszcze uruchomić.
            W tym celu przygotowuję plik do użycia i tworzę klasę pośredniczącą,
            która w konstruktorze uruchamia instancję kodu WebAssembly po czym wykorzystuje wyeksportowane metody w swoich własnych.</p><pre><code>const wasm = await fetch("./array.wasm")
    .then(req => req.arrayBuffer())
    .then(bin => WebAssembly.compile(bin));

class WasmArray {
    #wasm;
    constructor() {
        let ready;
        this.ready = new Promise(res => ready = res);

        const wasmImports = {
            js: { 
                memory: new WebAssembly.Memory({ initial: 1 })
            }
        };
        WebAssembly.instantiate(wasm, wasmImports).then(instance => {
            this.#wasm = instance.exports;
            ready(this);
        });
    }

    get(i) {
        return this.#wasm.get(i);
    }
    set(i, v) {
        this.#wasm.set(i, v);
    }
}</code></pre><p>Jeśli chcesz się tylko pobawić rezultatem i pominąć cały proces tworzenia
            i kompilowania WebAssembly, zamień przygotowanie pliku na takie:</p><pre><code>const wasm = await WebAssembly.compile(new Uint8Array([
    0,97,115,109,1,0,0,0,1,11,2,96,1,127,1,127,96,
    2,127,127,0,2,14,1,2,106,115,6,109,101,109,111,
    114,121,2,0,1,3,3,2,0,1,7,13,2,3,103,101,116,0,
    0,3,115,101,116,0,1,10,25,2,10,0,32,0,65,4,108,
    40,2,0,11,12,0,32,0,65,4,108,32,1,54,2,0,11
]));</code></pre><p>Struktura jest gotowa do użycia.</p><pre><code>const array = await (new WasmArray()).ready;
console.log(array.get(0));
console.log(array.get(1));
console.log(array.get(2));
// 0
// 0
// 0

console.log(array.set(0, 123));
console.log(array.set(1, 234));
console.log(array.set(2, 345));
// undefined
// undefined
// undefined

console.log(array.get(0));
console.log(array.get(1));
console.log(array.get(2));
// 123
// 234
// 345

console.log(array.get(1600));
console.log(array.get(1700));
// 0
// memory access out of bounds</code></pre></section><section><h2>Implementacja w javascript</h2><p>Ta wersja nie używa WebAssembly do działania.
            Zarządzanie pamięcią nadal odbywa się w obrębie wyznaczonego wycinka pamięci ale tym razem obsługa jest bardziej wysokopoziomowa i część rzeczy jest wykonana automatycznie.
            Różnicę widać na przykład podczas prób odczytu indeksów spoza zakresu, gdzie zwracany jest undefined zamiast wywołania błędu.</p><pre><code>class JsArray {
    #memory;
    constructor() {
        this.#memory = new Int32Array(16384);
    }

    get(i) {
        return this.#memory[i];
    }
    set(i, v) {
        this.#memory[i] = v;
    }
}

const array = new JSArray();
console.log(array.get(0));
console.log(array.get(1));
console.log(array.get(2));
// 0
// 0
// 0

console.log(array.set(0, 123));
console.log(array.set(1, 234));
console.log(array.set(2, 345));
// undefined
// undefined
// undefined

console.log(array.get(0));
console.log(array.get(1));
console.log(array.get(2));
// 123
// 234
// 345

console.log(array.get(1600));
console.log(array.get(1700));
// 0
// undefined</code></pre></section><section><h2>Zastosowanie</h2><p>Array służy do przechowywania wielu elementów tego samego typu w jednym miejscu.
            Struktura sprzyja szybkiemu odczytowi i zapisowi danych, ponieważ instrukcje operacji ograniczają się jedynie do obliczenia adresu pamięci.
            Nie ma też znaczenia, czy element znajduje się na początku, na końcu, czy gdzieś w środku pamięci.
            Dzięki temu, że elementy są blisko siebie i po kolei w pamięci, procesor lepiej wykorzystuje swoją pamięć podręczną - może wczytywać fragmenty po 64 bajty naraz, więc podczas pętli, pamięć może być odczytywana porcjami po 16 liczb i32, zamiast po jednej.
            Nie wprowadza też ona dodatkowych danych do swojej pamięci, przez co jej pojemność jest taka sama jak wyznaczonego wcześniej wycinka.
            Array jest więc idealna do trzymania obszernych lub często odczytywanych czy zmienianych danych, gdy cechy innych struktur (na przykład zmienna długość) są niepotrzebne.
            Wiele innych struktur danych i algorytmów opiera się na array - na przykład wszystkie inne struktury w dalszych częściach tego artykułu.</p></section><footer class="g g1"><a href="/artykuly/struktury_danych">Powrót do listy części</a><a href="/artykuly">Powrót do listy artykułów</a><a href="/">Powrót do strony głównej</a></footer></article><footer id="f" class="g113 g2"><address><a class="l" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="33" height="41" viewBox="0 0 408 512"><g transform="translate(-368 -584)"><rect width="80" height="80" transform="translate(696 1016)" fill="var(--cc)" /><path d="M368,1096V584H776V800H696V656H448v360H552v80Z" fill="var(--cc)" /><path d="M552,1096V880H776v80H632v136Z" fill="var(--c)" /></g></svg>grezisek</a><p>Full stack web developer</p><a href="mailto:grezisek@gmail.com">Napisz e-mail</a></address><div id="i"><details><summary class="m mh">Cel tej strony</summary><div><p>Przede wszystkim, chcę dostarczyć czytelnikom wszechstronnego materiału edukacyjnego
                z zakresu JavaScriptu.
                Strona stawia sobie za zadanie pomóc w nauce tego języka programowania poprzez
                przystępne tutoriale, praktyczne przykłady i ciekawe projekty.</p><p>Kolejnym celem jest prezentacja moich własnych projektów.
                Cieszę się, że mogę podzielić się moimi osiągnięciami z szeroką publicznością i
                pokazać, jak wykorzystuję JavaScript w praktyce.
                Moje projekty są różnorodne i obejmują zarówno drobne funkcje pomocnicze jak i
                wieloletnie projekty-giganty.
                Pragnę zainspirować innych programistów do eksperymentowania i tworzenia
                innowacyjnych rozwiązań.</p><p>Wreszcie, pragnę znaleźć pracę, która pozwoli mi wykorzystać moje doświadczenie w
                programowaniu i jednocześnie zapewni dynamiczne i kreatywne środowisko pracy.
                Cieszę się, że mogę zaprezentować swoje portfolio i udostępnić informacje o moich
                osiągnięciach na tej stronie.
                Liczę na to, że przyciągnie to uwagę pracodawców, którzy poszukują zdolnego i
                zaangażowanego programisty.</p></div></details><details><summary class="m mh">Ułatwienia dostępności</summary><div><p>Poprawa dostępności materiałów edukacyjnych jest jednym z głównych priorytetów
                technologicznych mojej strony internetowej.
                Ta została zaprojektowana i rozwijana zgodnie z wytycznymi WCAG w celu spełnienia co
                najmniej wersji AA.
                Oznacza to, że dokładam wszelkich starań, aby treści były czytelne, łatwe do
                nawigacji i dostępne dla osób z różnymi rodzajami niepełnosprawności oraz w trudnych
                warunkach.</p><p>Aby zapewnić jak największe dopasowanie, moja strona obsługuje automatyczne
                przełączanie między jasnym i ciemnym trybem.
                Możesz polegać na ustawieniach swojego urządzenia i oczekiwać przewidywalnych
                rezultatów (szczególnie braku nagłej, oślepiającej bieli w środku nocy).
                Strona automatycznie wykrywa też twoje preferencje ograniczonej ilości efektów ruchu
                i zmienia sposób animowania na bardziej przyjazny.</p><p>Ponadto, moja strona automatycznie redukuje zużycie internetu, wykrywając odpowiedni
                nagłówek HTTP i dostosowując zawartość.
                Dzięki temu, korzystając z wolniejszego połączenia internetowego lub ograniczonego
                pakietu danych, możesz nadal korzystać z treści strony w sposób efektywny i bez
                większych przeszkód.</p><p>Moja strona umożliwia pełne nawigowanie za pomocą klawiatury.
                Jeśli korzystasz z czytnika ekranowego lub masz trudności w obsłudze myszy, możesz
                swobodnie poruszać się po stronie i korzystać z jej funkcjonalności.</p><p>Dodatkowe dostosowanie strony do potrzeb lub upodobań jest możliwe poprzez panel
                ustawień.
                Możesz tam ręcznie kontrolować kontrast, przełączać między jasnym i ciemnym trybem i
                regulować grubość obramowań elementów interaktywnych. Możesz też kontrolować sposób zapisu
                ustawień i zarządzać zapisanymi danymi, jeśli twoje urządzenie wspiera użycie pamięci lokalnej.</p><p>Dążę do ciągłego doskonalenia dostępności mojej strony i monitorowania nowych
                wytycznych WCAG.
                Jeśli masz jakiekolwiek sugestie lub uwagi dotyczące dostępności mojej strony,
                proszę o kontakt.
                Cenię opinię użytkowników i jestem otwarty na wprowadzanie ulepszeń, aby zapewnić
                jak najlepsze doświadczenie dla wszystkich odwiedzających.</p></div></details><details><summary class="m mh">Polityka prywatności</summary><div><ol><li><b>Pliki cookie i śledzenie:</b>Ta strona internetowa nie używa plików cookie
                    ani śledzenia.
                    Nie gromadzę żadnych informacji o Twojej wizycie na stronie.</li><li><b>Dane przekazywane w mailu:</b>Jeśli skontaktujesz się ze mną, przesyłając
                    wiadomość e-mail, będę przetwarzać jedynie te dane, które dobrowolnie mi
                    udostępnisz w treści wiadomości.
                    Te informacje są używane wyłącznie w celu odpowiedzi na Twoje pytania i
                    zgłoszenia lub wcale.
                    Są to jednocześnie jedyne informacje o Tobie, do których mam dostęp.</li><li><b>Dane ustawień:</b>Strona może używać lokalnej pamięci przeglądarki do
                    zapamiętywania ustawień, jeśli urządzenie na to zezwala.
                    Zapamiętywanie ustawień jest opcjonalne i domyślnie nieaktywne.
                    W odróżnieniu od cookie, te dane nie są wysyłane przez internet.
                    Zapisane ustawienia możesz zobaczyć lub usunąć w panelu ustawień strony, w
                    grupie "Zapisane ustawienia" lub z poziomu panelu przeglądarki.
                    Ustawienia w panelu strony są niedostępne na urządzeniach bez pamięci lokalnej.</li><li><b>Udostępnianie danych:</b>Nie udostępniam żadnych przekazanych mi danych bez Twojej zgody, chyba że wymaga tego prawo.</li><li><b>Bezpieczeństwo:</b>Stosuję odpowiednie środki bezpieczeństwa, aby chronić
                    Twoje dane przed nieuprawnionym dostępem, utratą lub nieuprawnionym ujawnieniem.
                    Jednakże, żadna metoda przesyłania danych przez internet nie jest całkowicie
                    bezpieczna i nie mogę zagwarantować absolutnego bezpieczeństwa przekazywanych
                    informacji.</li><li><b>Zmiany w polityce prywatności:</b>Niniejsza polityka prywatności może być
                    okresowo aktualizowana.
                    Wszelkie istotne zmiany będą opublikowane na tej stronie.</li></ol></div></details></div><small>© grezisek 2023. Wszystkie prawa zastrzeżone.</small></footer></body></html>